{"ast":null,"code":"var _jsxFileName = \"/home/lucas/projeto/zebify/frontend/src/components/navbar.js\",\n  _process$env$REACT_AP,\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/authContext\";\nimport { FaUsers, FaHome, FaUser, FaPlus } from \"react-icons/fa\";\nimport \"../css/navbar.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API = (_process$env$REACT_AP = process.env.REACT_APP_API_URL) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : \"http://localhost:3001\";\nconst Navbar = () => {\n  _s();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [pedidos, setPedidos] = useState(0);\n  const buscarPedidos = useCallback(async () => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) return;\n    try {\n      const res = await fetch(`${API}/api/friends/requests`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (!res.ok) {\n        if (res.status === 401 || res.status === 403) {\n          setPedidos(0);\n          logout();\n          navigate(\"/login\");\n          return;\n        }\n        const txt = await res.text();\n        throw new Error(txt);\n      }\n      const data = await res.json();\n      setPedidos(data.length);\n    } catch (err) {\n      console.error(\"Erro ao buscar pedidos:\", err.message);\n    }\n  }, [logout, navigate]);\n  useEffect(() => {\n    if (!user) return;\n    buscarPedidos();\n    const t = setInterval(buscarPedidos, 10000);\n    return () => clearInterval(t);\n  }, [user, buscarPedidos]);\n  const handleLogout = () => {\n    logout();\n    navigate(\"/login\");\n  };\n  const Item = ({\n    Icon,\n    to,\n    badge,\n    title\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: () => navigate(to),\n    style: {\n      position: \"relative\",\n      marginRight: \"18px\",\n      cursor: \"pointer\"\n    },\n    title: title,\n    children: [/*#__PURE__*/_jsxDEV(Icon, {\n      size: 22,\n      color: location.pathname === to ? \"#4287f5\" : undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), badge > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        position: \"absolute\",\n        top: \"-6px\",\n        right: \"-8px\",\n        background: \"red\",\n        color: \"white\",\n        borderRadius: \"50%\",\n        padding: \"2px 6px\",\n        fontSize: \"11px\",\n        fontWeight: \"bold\"\n      },\n      children: badge\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n  const isAuthPage = [\"/login\", \"/signup\"].includes(location.pathname);\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"navbar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-left\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"logo\",\n        onClick: () => navigate(\"/\"),\n        children: \"Zebify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-right\",\n      children: user && !isAuthPage ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Item, {\n          Icon: FaHome,\n          to: \"/\",\n          title: \"Feed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Item, {\n          Icon: FaPlus,\n          to: \"/new-post\",\n          title: \"Nova publica\\xE7\\xE3o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Item, {\n          Icon: FaUsers,\n          to: \"/users\",\n          badge: pedidos,\n          title: \"Utilizadores / Pedidos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Item, {\n          Icon: FaUser,\n          to: \"/profile\",\n          title: \"Perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"welcome\",\n          children: [\"Ol\\xE1, \", user.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-sair\",\n          onClick: handleLogout,\n          children: \"Sair\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : !isAuthPage && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup\",\n          children: \"Registo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s(Navbar, \"nGpXT1B5XiTgYGuOEIX4uwfdIls=\", false, function () {\n  return [useAuth, useLocation, useNavigate];\n});\n_c = Navbar;\nexport default Navbar;\nvar _c;\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","Link","useLocation","useNavigate","useAuth","FaUsers","FaHome","FaUser","FaPlus","jsxDEV","_jsxDEV","Fragment","_Fragment","API","_process$env$REACT_AP","process","env","REACT_APP_API_URL","Navbar","_s","user","logout","location","navigate","pedidos","setPedidos","buscarPedidos","token","localStorage","getItem","res","fetch","headers","Authorization","ok","status","txt","text","Error","data","json","length","err","console","error","message","t","setInterval","clearInterval","handleLogout","Item","Icon","to","badge","title","onClick","style","position","marginRight","cursor","children","size","color","pathname","undefined","fileName","_jsxFileName","lineNumber","columnNumber","top","right","background","borderRadius","padding","fontSize","fontWeight","isAuthPage","includes","className","name","_c","$RefreshReg$"],"sources":["/home/lucas/projeto/zebify/frontend/src/components/navbar.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/authContext\";\nimport { FaUsers, FaHome, FaUser, FaPlus } from \"react-icons/fa\";\nimport \"../css/navbar.css\";\n\nconst API = process.env.REACT_APP_API_URL ?? \"http://localhost:3001\";\n\nconst Navbar = () => {\n  const { user, logout } = useAuth();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [pedidos, setPedidos] = useState(0);\n\n  const buscarPedidos = useCallback(async () => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) return;\n\n    try {\n      const res = await fetch(`${API}/api/friends/requests`, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      if (!res.ok) {\n        if (res.status === 401 || res.status === 403) {\n          setPedidos(0);\n          logout();\n          navigate(\"/login\");\n          return;\n        }\n        const txt = await res.text();\n        throw new Error(txt);\n      }\n\n      const data = await res.json();\n      setPedidos(data.length);\n    } catch (err) {\n      console.error(\"Erro ao buscar pedidos:\", err.message);\n    }\n  }, [logout, navigate]);\n\n  useEffect(() => {\n    if (!user) return;\n    buscarPedidos();\n    const t = setInterval(buscarPedidos, 10_000);\n    return () => clearInterval(t);\n  }, [user, buscarPedidos]);\n\n  const handleLogout = () => {\n    logout();\n    navigate(\"/login\");\n  };\n\n  const Item = ({ Icon, to, badge, title }) => (\n    <div\n      onClick={() => navigate(to)}\n      style={{ position: \"relative\", marginRight: \"18px\", cursor: \"pointer\" }}\n      title={title}\n    >\n      <Icon\n        size={22}\n        color={location.pathname === to ? \"#4287f5\" : undefined}\n      />\n      {badge > 0 && (\n        <span\n          style={{\n            position: \"absolute\",\n            top: \"-6px\",\n            right: \"-8px\",\n            background: \"red\",\n            color: \"white\",\n            borderRadius: \"50%\",\n            padding: \"2px 6px\",\n            fontSize: \"11px\",\n            fontWeight: \"bold\",\n          }}\n        >\n          {badge}\n        </span>\n      )}\n    </div>\n  );\n\n  const isAuthPage = [\"/login\", \"/signup\"].includes(location.pathname);\n\n  return (\n    <nav className=\"navbar\">\n      <div className=\"navbar-left\">\n        <span className=\"logo\" onClick={() => navigate(\"/\")}>\n          Zebify\n        </span>\n      </div>\n\n      <div className=\"navbar-right\">\n        {user && !isAuthPage ? (\n          <>\n            <Item Icon={FaHome} to=\"/\" title=\"Feed\" />\n\n            <Item Icon={FaPlus} to=\"/new-post\" title=\"Nova publicação\" />\n\n            <Item\n              Icon={FaUsers}\n              to=\"/users\"\n              badge={pedidos}\n              title=\"Utilizadores / Pedidos\"\n            />\n\n            <Item Icon={FaUser} to=\"/profile\" title=\"Perfil\" />\n\n            <span className=\"welcome\">Olá, {user.name}</span>\n            <button className=\"btn-sair\" onClick={handleLogout}>\n              Sair\n            </button>\n          </>\n        ) : (\n          !isAuthPage && (\n            <>\n              <Link to=\"/login\">Login</Link>\n              <Link to=\"/signup\">Registo</Link>\n            </>\n          )\n        )}\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}